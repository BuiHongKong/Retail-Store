{"annotations":{"list":[]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":null,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"prometheus","uid":"${datasource}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisLabel":"","axisPlacement":"auto"},"unit":"reqps"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":0},"id":1,"options":{"legend":{"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"datasource":{"type":"prometheus","uid":"${datasource}"},"expr":"sum(rate(http_requests_total[5m])) by (job)","legendFormat":"{{job}}","refId":"A"}],"title":"Request rate by service","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"${datasource}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false},"unit":"s"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":0},"id":2,"options":{"legend":{"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"datasource":{"type":"prometheus","uid":"${datasource}"},"expr":"histogram_quantile(0.99, sum(rate(http_request_duration_seconds_bucket[5m])) by (le, job))","legendFormat":"p99 {{job}}","refId":"A"},{"datasource":{"type":"prometheus","uid":"${datasource}"},"expr":"histogram_quantile(0.50, sum(rate(http_request_duration_seconds_bucket[5m])) by (le, job))","legendFormat":"p50 {{job}}","refId":"B"}],"title":"Request duration (p50, p99) by service","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"${datasource}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false},"unit":"reqps"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":8},"id":3,"options":{"legend":{"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"datasource":{"type":"prometheus","uid":"${datasource}"},"expr":"sum(rate(http_requests_total{status_code=~\"5..\"}[5m])) by (job)","legendFormat":"5xx {{job}}","refId":"A"}],"title":"5xx error rate by service","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"${datasource}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false},"unit":"short"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":8},"id":4,"options":{"legend":{"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"datasource":{"type":"prometheus","uid":"${datasource}"},"expr":"sum(increase(http_requests_total[1h])) by (job)","legendFormat":"{{job}}","refId":"A"}],"title":"Total requests (last 1h) by service","type":"timeseries"},{"datasource":{"type":"loki","uid":"${loki_datasource}"},"gridPos":{"h":10,"w":24,"x":0,"y":16},"id":5,"options":{"showTime":true,"sortOrder":"Descending"},"targets":[{"datasource":{"type":"loki","uid":"${loki_datasource}"},"expr":"{job=\"backend\"}","refId":"A"}],"title":"Logs (Loki)","type":"logs"}],"refresh":"10s","schemaVersion":38,"style":"dark","tags":["retail-store"],"templating":{"list":[{"current":{"selected":false,"text":"Prometheus","value":"Prometheus"},"hide":0,"includeAll":false,"name":"datasource","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource","datasource":{"type":"prometheus","uid":"prometheus"}},{"current":{"selected":false,"text":"Loki","value":"Loki"},"hide":0,"includeAll":false,"name":"loki_datasource","options":[],"query":"loki","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource","datasource":{"type":"loki","uid":"loki"}}]},"time":{"from":"now-1h","to":"now"},"timepicker":{},"timezone":"","title":"Retail Store - App metrics","uid":"retail-store-app","version":1,"weekStart":""}
